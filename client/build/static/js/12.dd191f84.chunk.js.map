{"version":3,"sources":["features/Login/index.jsx"],"names":["Login","props","useForm","handleSubmit","register","history","errors","useHistory","dispatch","useDispatch","useState","user","setUser","onChangeInput","e","target","name","value","onSubmit","a","userApi","login","token","getUser","inforUser","addToUser","localStorage","setItem","JSON","stringify","push","alert","response","data","msg","useEffect","getItem","className","style","color","type","onChange","placeholder","required","ref","validate"],"mappings":"0PAkFeA,UApEf,SAAeC,GAAQ,IAAD,EAEyBC,cAAnCC,EAFU,EAEVA,aAAcC,EAFJ,EAEIA,SAChBC,GAHY,EAEcC,OAChBC,eACVC,EAAWC,cAJC,EAKMC,mBAAS,CAC7B,MAAS,GACT,SAAY,KAPE,mBAKXC,EALW,KAKLC,EALK,KAUZC,EAAgB,SAACC,GAAO,IAAD,EACDA,EAAEC,OAAlBC,EADiB,EACjBA,KAAMC,EADW,EACXA,MACdL,EAAQ,eAAKD,EAAN,eAAaK,EAAOC,MAEzBC,EAAQ,uCAAG,8BAAAC,EAAA,+EAEWC,IAAQC,MAAR,eAAmBV,IAF9B,cAEHW,EAFG,gBAGeF,IAAQG,UAHvB,OAGHC,EAHG,OAIThB,EAASiB,YAAUD,IACnBE,aAAaC,QAAQ,QAASC,KAAKC,UAAUP,IAC7CI,aAAaC,QAAQ,cAAc,GACnCtB,EAAQyB,KAAK,UAPJ,kDASTC,MAAM,KAAIC,SAASC,KAAKC,KATf,0DAAH,qDAoBd,OAPAC,qBAAU,WAES,QADCT,aAAaU,QAAQ,eAEjC/B,EAAQyB,KAAK,YAGlB,IAEC,8BACI,yBAAKO,UAAU,SACX,yBAAKA,UAAU,mBACX,2CACA,0BAAMnB,SAAUf,EAAae,IACzB,yBAAKmB,UAAU,mBACX,2BAAOC,MAAO,CAAEC,MAAO,UAAvB,UACA,yBAAKF,UAAU,SACX,uBAAGA,UAAU,gBACb,2BAAOrB,KAAK,QAAQwB,KAAK,QAAQC,SAAU5B,EAAewB,UAAU,eAAeK,YAAY,QAAQC,SAAS,WAAWC,IAAKxC,EAAS,CACrIyC,SAAU,SAAA5B,GAAK,MAAc,UAAVA,GAAqB,mBAIpD,yBAAKoB,UAAU,mBACX,2BAAOC,MAAO,CAAEC,MAAO,UAAvB,aACA,yBAAKF,UAAU,SACX,uBAAGA,UAAU,kBACb,2BAAOrB,KAAK,WAAWwB,KAAK,WAAWC,SAAU5B,EAAewB,UAAU,eAAeK,YAAY,WAAWC,SAAS,WACrHC,IAAKxC,EAAS,CACVyC,SAAU,SAAA5B,GAAK,MAAc,UAAVA,GAAqB,mBAKxD,4BAAQoB,UAAU,YAAYG,KAAK,UAAnC","file":"static/js/12.dd191f84.chunk.js","sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\nimport './style.scss';\r\nimport './Login.scss';\r\nimport { useForm } from 'react-hook-form';\r\n\r\nimport userApi from 'api/useAPI'\r\n\r\nimport { useDispatch } from 'react-redux';\r\nimport { addToUser } from './authSlice';\r\n\r\n\r\nLogin.propTypes = {};\r\n\r\nfunction Login(props) {\r\n\r\n    const { handleSubmit, register, errors } = useForm();\r\n    const history = useHistory();\r\n    const dispatch = useDispatch();\r\n    const [user, setUser] = useState({\r\n        \"email\": '',\r\n        \"password\": ''\r\n    })\r\n\r\n    const onChangeInput = (e) => {\r\n        const { name, value } = e.target;\r\n        setUser({ ...user, [name]: value })\r\n    }\r\n    const onSubmit = async () => {\r\n        try {\r\n            const token = await userApi.login({ ...user })\r\n            const inforUser = await userApi.getUser()\r\n            dispatch(addToUser(inforUser));\r\n            localStorage.setItem(\"token\", JSON.stringify(token))\r\n            localStorage.setItem('firstLogin', true)\r\n            history.push('/admin')\r\n        } catch (err) {\r\n            alert(err.response.data.msg)\r\n        }\r\n\r\n    }\r\n    useEffect(() => {\r\n        const islogin = localStorage.getItem('firstLogin');\r\n        if (islogin == \"true\") {\r\n            history.push('/admin')\r\n        }\r\n\r\n    }, [])\r\n    return (\r\n        <body>\r\n            <div className=\"Login\">\r\n                <div className=\" w3l-login-form\">\r\n                    <h2>Login Admin</h2>\r\n                    <form onSubmit={handleSubmit(onSubmit)}>\r\n                        <div className=\" w3l-form-group\">\r\n                            <label style={{ color: \"black\" }}>Email:</label>\r\n                            <div className=\"group\">\r\n                                <i className=\"fas fa-user\" />\r\n                                <input name=\"email\" type=\"email\" onChange={onChangeInput} className=\"form-control\" placeholder=\"Email\" required=\"required\" ref={register({\r\n                                    validate: value => value !== \"admin\" || \"Nice try!\"\r\n                                })} />\r\n                            </div>\r\n                        </div>\r\n                        <div className=\" w3l-form-group\">\r\n                            <label style={{ color: \"black\" }}>Password:</label>\r\n                            <div className=\"group\">\r\n                                <i className=\"fas fa-unlock\" />\r\n                                <input name=\"password\" type=\"password\" onChange={onChangeInput} className=\"form-control\" placeholder=\"Password\" required=\"required\"\r\n                                    ref={register({\r\n                                        validate: value => value !== \"admin\" || \"Nice try!\"\r\n                                    })}\r\n                                />\r\n                            </div>\r\n                        </div>\r\n                        <button className=\"btnSubmit\" type=\"submit\">Login</button>\r\n                    </form>\r\n                </div>\r\n            </div>\r\n        </body>\r\n    );\r\n}\r\n\r\nexport default Login;"],"sourceRoot":""}