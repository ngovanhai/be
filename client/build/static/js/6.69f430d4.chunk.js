(this["webpackJsonpshop-clother"]=this["webpackJsonpshop-clother"]||[]).push([[6],{657:function(e,t,a){},658:function(e,t,a){},681:function(e,t,a){"use strict";a.r(t);var n=a(50),r=a(12),c=a.n(r),l=a(19),i=a(21),s=a(0),u=a.n(s),m=a(34),o=(a(71),a(422)),p=a(480),h=a(269),f=(a(277),a(32)),d=(a(98),a(87)),g=a(660),b=(a(657),a(57)),E=a(212),v=a.n(E),x=a(659),j=a.n(x);a(658);var k=function(e){var t=e.url,a=e.id,n=e.onClickRemove;return e.loading,console.log(t,a),u.a.createElement(h.a,{item:!0,xs:6}," ",u.a.createElement("span",null,u.a.createElement(j.a,{className:"Preview__delete",onClick:function(){n(a)}})),u.a.createElement("img",{src:t,className:"Preview__img",alt:""}))},O=(a(238),a(493)),y=a(675),w=a(494),_=a(495),I=a(125),P=O.a.Option,C=Object(o.a)((function(e){return{formControl:{margin:e.spacing(4),minWidth:800}}}));t.default=function(e){C();var t=Object(m.i)().productId,a=Object(s.useState)([]),r=Object(i.a)(a,2),o=r[0],E=r[1],x=(Object(f.b)(),Object(s.useState)(!1)),j=Object(i.a)(x,2),F=(j[0],j[1]),N=Object(s.useState)(!1),S=Object(i.a)(N,2),q=S[0],A=S[1],T=Object(s.useState)(!1),V=Object(i.a)(T,2),G=V[0],M=V[1],z=!t,D=Object(s.useState)([]),J=Object(i.a)(D,2),R=J[0],K=J[1],Q={wrapperCol:{offset:6,span:18}},W=function(){var e=Object(l.a)(c.a.mark((function e(t){var a,n,r,l;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),e.prev=1,a=t.target.files,n=new FormData,a){e.next=6;break}return e.abrupt("return",alert("! File not exits"));case 6:if(!(a.length>1)){e.next=17;break}r=0;case 8:if(!(r<a.length)){e.next=17;break}if(!(a[r].size>16777216)){e.next=11;break}return e.abrupt("return",alert("File too large!"));case 11:if("image/jpeg"===a[r].type||"image/png"===a[r].type){e.next=13;break}return e.abrupt("return",alert("file fomat is incorrect"));case 13:n.append("images".concat(r),a[r]);case 14:r++,e.next=8;break;case 17:if(1!==a.length){e.next=23;break}if(!(a[0].size>1048576)){e.next=20;break}return e.abrupt("return",alert("File too large!"));case 20:if("image/jpeg"===a[0].type||"image/png"===a[0].type){e.next=22;break}return e.abrupt("return",alert("file fomat is incorrect"));case 22:n.append("images0",a[0]);case 23:return e.prev=23,A(!0),e.next=27,v.a.post("http://localhost:5000/api/upload",n,{headers:{"content-type":"multipart/form-data"}});case 27:l=e.sent,K(l.data),A(!1),e.next=35;break;case 32:e.prev=32,e.t0=e.catch(23),alert(e.t0.message);case 35:e.next=40;break;case 37:e.prev=37,e.t1=e.catch(1),alert(e.t1.message);case 40:case"end":return e.stop()}}),e,null,[[1,37],[23,32]])})));return function(t){return e.apply(this,arguments)}}(),B=function(){var e=Object(l.a)(c.a.mark((function e(t){var a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.deleteImage({public_id:t});case 2:a=R.filter((function(e){return e.public_id!==t})),K(a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(s.useEffect)((function(){(function(){var e=Object(l.a)(c.a.mark((function e(){var a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.get(t);case 2:a=e.sent,K(a.image),E(a),F(!1);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),u.a.createElement(y.a,{className:"AddEditProduct"},(0==z&&0!==Object.keys(o).length||1==z)&&u.a.createElement(p.a,null,u.a.createElement("div",{className:"AddEditProduct__content"},u.a.createElement("h1",null,z?"Th\xeam s\u1ea3n ph\u1ea9m":o.tittle)),u.a.createElement(h.a,{container:!0,spacing:0},u.a.createElement(h.a,{item:!0,xs:3},u.a.createElement("div",{className:"AddEditProduct__upload"},u.a.createElement("input",{type:"file",className:"AddEditProduct__input",multiple:!0,onChange:W}),u.a.createElement(h.a,{container:!0,xs:2,className:"AddEditProduct__show"},q?u.a.createElement(g.a,null):R.map((function(e){return u.a.createElement(k,{loading:q,url:e.url,id:e.public_id,onClickRemove:B})}))))),u.a.createElement(h.a,{item:!0,xs:9,style:{}},u.a.createElement(w.a,Object.assign({},{labelCol:{span:6},wrapperCol:{span:18}},{name:"basic",initialValues:{tittle:z?"":o.tittle,mota:z?"":o.mota,gia:z?"":o.gia,soluong:z?"":o.soluong,sale:z?"":o.sale,phanloai:z?"":o.phanloai},onFinish:function(e){z?function(e){if(0!==R.length){var t=Object(n.a)({},e,{image:R,product_id:Math.trunc(1e3*Math.random())});(function(){var e=Object(l.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return M(!0),e.next=3,d.a.create(t);case 3:M(!1),alert("Th\xeam s\u1ea3n ph\u1ea9m th\xe0nh c\xf4ng");case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}else alert("xin m\u1eddi ch\u1ecdn \u1ea3nh")}(e):function(e){if(0!==R.length){var a=Object(n.a)({},e,{image:R});(function(){var e=Object(l.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return M(!0),e.next=3,d.a.update(t,a);case 3:M(!1),alert("s\u1ee7a s\u1ea3n ph\u1ea9m th\xe0nh c\xf4ng");case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}else alert("xin m\u1eddi ch\u1ecdn \u1ea3nh")}(e)},onFinishFailed:function(e){console.log("Failed:",e)}}),u.a.createElement(w.a.Item,{label:"T\xean s\u1ea3n ph\u1ea9m",name:"tittle",rules:[{required:!0,message:"Vui l\xf2ng nh\u1eadp t\xean s\u1ea3n ph\u1ea9m!"}]},u.a.createElement(_.a,null)),u.a.createElement(w.a.Item,{label:"Ph\xe2n lo\u1ea1i",name:"phanloai"},u.a.createElement(O.a,null,u.a.createElement(P,{value:"quan-nam"},"Qu\u1ea7n nam"),u.a.createElement(P,{value:"phu-kien"},"Ph\u1ee5 ki\u1ec7n"),u.a.createElement(P,{value:"giay-dep"},"Gi\xe0y d\xe9p"))),u.a.createElement(w.a.Item,{label:"M\xf4 t\u1ea3 s\u1ea3n ph\u1ea9m",name:"mota",rules:[{required:!0,message:"Vui l\xf2ng nh\u1eadp m\xf4 t\u1ea3 s\u1ea3n ph\u1ea9m !"}]},u.a.createElement(_.a.TextArea,{rows:4})),u.a.createElement(w.a.Item,{label:"Gi\xe1 s\u1ea3n ph\u1ea9m",name:"gia",rules:[{required:!0,message:"Vui l\xf2ng nh\u1eadp Gi\xe1 s\u1ea3n ph\u1ea9m!"}]},u.a.createElement(_.a,{type:"number"})),u.a.createElement(w.a.Item,{label:"S\u1ed1 l\u01b0\u1ee3ng",name:"soluong",rules:[{required:!0,message:"Vui l\xf2ng nh\u1eadp s\u1ed1 l\u01b0\u1ee3ng!"}]},u.a.createElement(_.a,{type:"number"})),u.a.createElement(w.a.Item,{label:"Khuy\u1ebfn m\xe3i",name:"sale",rules:[{required:!0,message:"Vui l\xf2ng nh\u1eadp s\u1ed1 khuy\u1ebfn m\xe3i !"}]},u.a.createElement(_.a,{type:"number"})),u.a.createElement(w.a.Item,Q,u.a.createElement(I.a,{type:"primary",htmlType:"submit",loading:G},z?"Th\xeam s\u1ea3n ph\u1ea9m":"S\u1eeda s\u1ea3n ph\u1ea9m")))))))}}}]);
//# sourceMappingURL=6.69f430d4.chunk.js.map